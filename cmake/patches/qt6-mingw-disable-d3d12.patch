--- a/src/gui/CMakeLists.txt
+++ b/src/gui/CMakeLists.txt
@@ -399,6 +399,7 @@
         animation/qguivariantanimation.cpp
 )
 
+# Base Windows support (D3D11 only for MinGW due to ABI compatibility)
 qt_internal_extend_target(Gui CONDITION WIN32
     SOURCES
         image/qpixmap_win.cpp image/qpixmap_win_p.h
@@ -408,10 +409,6 @@
         platform/windows/qwindowsnativeinterface.cpp
         rhi/qrhid3d11.cpp rhi/qrhid3d11_p.h rhi/qrhid3dhelpers_p.h
         rhi/vs_test_p.h
-        rhi/qrhid3d12.cpp rhi/qrhid3d12_p.h
-        rhi/cs_mipmap_p.h
-        ../3rdparty/D3D12MemoryAllocator/D3D12MemAlloc.h
-        ../3rdparty/D3D12MemoryAllocator/D3D12MemAlloc.cpp
         text/windows/qwindowsfontdatabase.cpp text/windows/qwindowsfontdatabase_p.h
         text/windows/qwindowsfontdatabasebase.cpp text/windows/qwindowsfontdatabasebase_p.h
         text/windows/qwindowsfontengine.cpp text/windows/qwindowsfontengine_p.h
@@ -426,6 +423,16 @@
         d3d11
         dxgi
         dxguid
+)
+
+# D3D12 RHI backend - only for MSVC (MinGW has ABI incompatibility with D3D12 headers)
+qt_internal_extend_target(Gui CONDITION WIN32 AND MSVC
+    SOURCES
+        rhi/qrhid3d12.cpp rhi/qrhid3d12_p.h
+        rhi/cs_mipmap_p.h
+        ../3rdparty/D3D12MemoryAllocator/D3D12MemAlloc.h
+        ../3rdparty/D3D12MemoryAllocator/D3D12MemAlloc.cpp
+    PUBLIC_LIBRARIES
         d3d12
 )
 
--- a/src/gui/rhi/qrhi.cpp
+++ b/src/gui/rhi/qrhi.cpp
@@ -14,8 +14,10 @@
 #endif
 #ifdef Q_OS_WIN
 #include "qrhid3d11_p.h"
+#if defined(_MSC_VER)
 #include "qrhid3d12_p.h"
 #endif
+#endif
 #if defined(Q_OS_MACOS) || defined(Q_OS_IOS)
 #include "qrhimetal_p.h"
 #endif
@@ -8005,10 +8007,13 @@
         break;
 #endif
     case D3D12:
-#ifdef Q_OS_WIN
+#if defined(Q_OS_WIN) && defined(_MSC_VER)
         r->d = new QRhiD3D12(static_cast<QRhiD3D12InitParams *>(params),
                              static_cast<QRhiD3D12NativeHandles *>(importDevice));
         break;
+#elif defined(Q_OS_WIN)
+        qWarning("This build of Qt has no Direct3D 12 support");
+        break;
 #else
         qWarning("This platform has no Direct3D 12 support");
         break;
